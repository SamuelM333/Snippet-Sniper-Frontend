<app-nav>
  <div (window:resize)="onResize()" class="row">
    <div class="col s12">
      <!--Desktop tabs bar-->
      <ul class="tabs tabs-fixed-width grey darken-3 hide-on-small-only">

        <!--My Snippets -->
        <li class="tab col s3">
          <a class="waves-effect waves-light active" href="#tab1">My Snippets</a>
        </li>

        <!--Snippets shared with me-->
        <li class="tab col s3">
          <a class="waves-effect waves-light" href="#tab2">Shared with me</a>
        </li>

        <!--My account-->
        <li class="tab col s3">
          <a class="waves-effect waves-light" href="#tab3">My account</a>
        </li>

        <!--Admin panel-->
        <li *ngIf="admin == 1" class="tab col s3">
          <a class="waves-effect waves-light" href="#tab4">Admin panel</a>
        </li>

      </ul>
      <!--Mobile tabs bar-->
      <ul class="tabs tabs-fixed-width grey darken-3 hide-on-med-and-up">

        <!--My Snippets -->
        <li class="tab col s3 hide-on-med-and-up">
          <a class="waves-effect waves-light active" href="#tab1"><i class="material-icons">list</i></a>
        </li>

        <!--Snippets shared with me-->
        <li class="tab col s3 hide-on-med-and-up">
          <a class="waves-effect waves-light" href="#tab2"><i class="material-icons">share</i></a>
        </li>

        <!--My account-->
        <li class="tab col s3 hide-on-med-and-up">
          <a class="waves-effect waves-light" href="#tab3"><i class="material-icons">person</i></a>
        </li>

        <!--Admin panel-->
        <li *ngIf="admin == 1" class="tab col s3 hide-on-med-and-up">
          <a class="waves-effect waves-light" href="#tab4"><i class="material-icons">lock</i></a>
        </li>
      </ul>
    </div>
  </div>
</app-nav>

<div id="profile-container" class="container">

  <!--My Snippets tab-->
  <div id="tab1" class="col s12">
    <div class="row">
      <div class="section-title">
        <h4 class="white-text center">My snippets</h4>
      </div>
    </div>
  </div>

  <!--Snippets shared with me tab-->
  <div id="tab2" class="col s12">
    <div class="row">
      <div class="section-title">
        <h4 class="white-text center">Shared with me</h4>
      </div>
    </div>
  </div>

  <!--My account tab-->
  <div id="tab3" class="col s12">
    <div class="section-title">
      <h4 class="white-text center">My account</h4>
    </div>
    <!--Profile picture-->
    <div class="row">
      <div class="col s12">
        <div class="card">
          <div class="card-content">
            <span class="card-title">Profile picture</span>
            <div class="row">
              <div class="col s12 m6 center">
                <div class="profile-img-container">
                  <label for="file-input">
                    <img id="profile-picture" class="responsive-img" [src]="profilePicture">
                    <a><i class="material-icons">camera_alt</i></a>
                  </label>
                  <input id="file-input" type="file" accept="image/*"
                         ngFileSelect
                         [options]="options"
                         [events]="events"
                         (beforeUpload)="beforeUpload($event)"
                         (onPreviewData)="handlePreviewData($event)"
                         (onUpload)="handleUpload($event)">
                </div>
              </div>
              <div class="col s12 m6 profile-text">
                <p>
                  This will be the picture that others users will see when you upload a snippet. <br>
                  <small>The file size is 1Mb maximum.</small>
                </p>
              </div>
            </div>
            <!--<div class="row">-->
              <!--<button [disabled]="!profilePictureChanged" (click)="submitProfilePicture()"-->
                      <!--class="center-btn btn waves-effect waves-dark right">-->
                <!--Change profile picture-->
              <!--</button>-->
            <!--</div>-->
            <div class="row">Response: {{ response | json }}</div>
            <div class="progress">
              <div class="determinate" [style.width]="progress + '%'"></div>
            </div>
          </div>
        </div>

      </div>

      <form #profileForm="ngForm" (ngSubmit)="onSubmitUpdateProfileForm(profileForm)" enctype="multipart/form-data">
        <div class="col s12 m6">
          <div class="card">
            <div class="card-content">
              <span class="card-title">Profile information</span>
              <div class="input-field col s12">
                <input [(ngModel)]="name" (keyup)="profileInformationFormUpdated($event)"
                       type="text" name="name" id="name" placeholder=" " required/>
                <label for="name">Name: </label>
              </div>
              <div class="input-field col s12">
                <input [(ngModel)]="last_name" (keyup)="profileInformationFormUpdated($event)"
                       type="text" name="last_name" id="last_name" placeholder=" " required/>
                <label for="last_name">Last name: </label>
              </div>
              <div class="input-field col s12">
                <input [(ngModel)]="email" (keyup)="profileInformationFormUpdated($event)" id="email"
                       type="email" name="email" class="validate" placeholder=" " required/>
                <label for="email" data-error="Invalid email" data-success="">Email: </label>
              </div>
              <div class="row">
                <button [disabled]="!updateInformationEnabled || profileForm.invalid" type="submit"
                        class="center-btn btn waves-effect waves-dark right">
                  Update information
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>

      <form #passwordForm="ngForm" (ngSubmit)="onSubmitChangePassword(passwordForm)">

        <div class="col s12 m6">
          <div class="card">
            <div class="card-content">
              <span class="card-title">Change password</span>
              <div class="input-field col s12">
                <input ngModel id="old-password" name="old_password"
                       type="password" required>
                <label for="old-password">Old Password:</label>
              </div>
              <div class="input-field col s12">
                <input [(ngModel)]="password" (keyup)="passwordFormUpdated($event)" id="password" name="password"
                       type="password" required>
                <label for="password">New Password:</label>
              </div>
              <div class="input-field col s12">
                <input [(ngModel)]="password_rpt" (keyup)="passwordFormUpdated($event)"
                       [class.invalid]="!changePasswordEnabled && passwordForm.touched"
                       [class.valid]="changePasswordEnabled && passwordForm.touched" id="password_rpt" type="password"
                       name="password_rpt" required>
                <label for="password_rpt" data-error="Passwords don't match" data-success="">New Password
                  (again):</label>
              </div>
              <div class="row">
                <button [disabled]="!changePasswordEnabled || !passwordForm.valid"
                        class="center-btn btn waves-effect waves-dark right">
                  Change password
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!--Admin panel-->
  <div *ngIf="admin == 1" id="tab4" class="col s12">
    <div class="row">
      <div class="section-title">
        <h4 class="white-text center">Admin panel</h4>
      </div>
    </div>
  </div>

</div>

<app-footer></app-footer>
